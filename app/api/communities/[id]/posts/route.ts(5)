import { NextRequest, NextResponse } from 'next/server';

export async function GET(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const { id } = await params;

    // Mock posts data
    const mockPosts = [
      {
        id: '1',
        content: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ†! Ù‡Ù†Ø§ Ù†Ø´Ø§Ø±Ùƒ Ø£ÙÙƒØ§Ø±Ù†Ø§ ÙˆÙ†ØªØ¹Ù„Ù… Ù…Ù† Ø¨Ø¹Ø¶Ù†Ø§ Ø§Ù„Ø¨Ø¹Ø¶. Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ø¨Ø¯Ø£ Ø¨ØªÙ‚Ø¯ÙŠÙ… Ø£Ù†ÙØ³Ù†Ø§ ÙˆÙ…Ø´Ø§Ø±ÙŠØ¹Ù†Ø§.',
        author: { id: '1', name: 'Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ø­Ù…Ø¯' },
        likes: 45,
        comments: [
          { id: '1', content: 'Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ ÙØ§Ø·Ù…Ø©ØŒ Ø£Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ù…Ø´Ø±ÙˆØ¹ ØªÙ‚Ù†ÙŠ ÙÙŠ Ù…Ø¬Ø§Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ…', author: { id: '2', name: 'ÙØ§Ø·Ù…Ø© Ø§Ù„Ø¹Ù„ÙŠ' } },
          { id: '2', content: 'Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø§Ù„Ø¬Ù…ÙŠØ¹! Ù…ØªØ­Ù…Ø³ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ø±Ø§Ø¦Ø¹', author: { id: '3', name: 'Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø¹ÙŠØ¯' } },
        ],
        isLiked: false,
        createdAt: new Date().toISOString(),
      },
      {
        id: '2',
        content: 'Ø´Ø§Ø±ÙƒÙˆØ§ Ù…Ø¹Ù†Ø§: Ù…Ø§ Ù‡Ùˆ Ø£ÙƒØ¨Ø± ØªØ­Ø¯ÙŠ ÙˆØ§Ø¬Ù‡ØªÙ…ÙˆÙ‡ ÙÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ÙƒÙ…ØŸ ÙˆÙƒÙŠÙ ØªØºÙ„Ø¨ØªÙ… Ø¹Ù„ÙŠÙ‡ØŸ',
        author: { id: '4', name: 'Ù†ÙˆØ±Ø© Ø§Ù„Ø®Ø§Ù„Ø¯' },
        likes: 32,
        comments: [
          { id: '3', content: 'Ø£ÙƒØ¨Ø± ØªØ­Ø¯ÙŠ ÙƒØ§Ù† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ØŒ Ù„ÙƒÙ† Ø¨Ø°Ø±Ø© Ø³Ø§Ø¹Ø¯ØªÙ†ÙŠ ÙƒØ«ÙŠØ±Ø§Ù‹!', author: { id: '5', name: 'Ø®Ø§Ù„Ø¯ Ø§Ù„Ø£Ø­Ù…Ø¯' } },
        ],
        isLiked: false,
        createdAt: new Date(Date.now() - 3600000).toISOString(),
      },
      {
        id: '3',
        content: 'Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ…: Ù„Ø§ ØªØ³ØªØ³Ù„Ù…! ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ Ù†Ø§Ø¬Ø­ Ø¨Ø¯Ø£ Ø¨ÙÙƒØ±Ø© Ø¨Ø³ÙŠØ·Ø© ÙˆØ¥ØµØ±Ø§Ø± Ù‚ÙˆÙŠ. Ø§Ø³ØªÙ…Ø±ÙˆØ§ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø£Ø­Ù„Ø§Ù…ÙƒÙ… ğŸ’ª',
        author: { id: '6', name: 'Ø³Ø§Ø±Ø© Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ' },
        likes: 67,
        comments: [],
        isLiked: false,
        createdAt: new Date(Date.now() - 7200000).toISOString(),
      },
    ];

    return NextResponse.json({
      success: true,
      posts: mockPosts,
    });
  } catch (error) {
    console.error('Posts fetch error:', error);
    return NextResponse.json(
      { success: false, error: 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª' },
      { status: 500 }
    );
  }
}

export async function POST(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const { id } = await params;
    const body = await request.json();
    const { content } = body;

    if (!content || !content.trim()) {
      return NextResponse.json(
        { success: false, error: 'Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø·Ù„ÙˆØ¨' },
        { status: 400 }
      );
    }

    // Mock successful post creation
    return NextResponse.json({
      success: true,
      message: 'ØªÙ… Ù†Ø´Ø± Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­',
      post: {
        id: Date.now().toString(),
        content,
        author: { id: '1', name: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ' },
        likes: 0,
        comments: [],
        isLiked: false,
        createdAt: new Date().toISOString(),
      },
    });
  } catch (error) {
    console.error('Post creation error:', error);
    return NextResponse.json(
      { success: false, error: 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù†Ø´Ø± Ø§Ù„Ù…Ù†Ø´ÙˆØ±' },
      { status: 500 }
    );
  }
}

